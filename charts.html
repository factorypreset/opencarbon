<!DOCTYPE html>
<html>
<head>
  <title>OpenCarbon json tool</title>
  <link href="css/examples.css" rel="stylesheet" type="text/css">
  
  <script type="text/javascript" src="js/lib/require.js"></script>
  <script type="text/javascript" src="js/config.js"></script>

  <script type="text/javascript">
    
    require(['backbone', 'jquery', 'jquery.flot', 'models/city', 'collections/city_list', 'views/city_chooser'], function(Backbone, $, flot, City, CityList, CityChooser){

        var cityChooser = new CityChooser();


        var cities = new CityList();

        var city = new City('austin');

        city.fetch().complete(function(){
          var percentagePlots = city.plotPercentages(),
              absolutePlots = city.plotAbsolutes(),
              source = city.source(),
              baselineYear = city.baselineYear();

          $("#header h2").text(city.title());
          $("h3#percentage-heading").text("Emission reduction targets relative to base year (" + baselineYear + ")");
          $.plot("#percentage-placeholder", percentagePlots);

          $("h3#absolute-heading").text("Emissions reduction targets in tonnes CO2e");
          $.plot("#absolute-placeholder", absolutePlots);

          // TODO: this should be in a template
          $("#details p").html('Source: <a href="' + source['url'] + '">' + source['title'] + '</a> (' + source['author'] +') <br />Baseline year: ' + baselineYear);
        });


      });

  </script>

</head>
<body>
  <div id="header">
    <h2>OpenCarbon Inventory</h2>
    <h3></h3>
  </div>

  <div id="citychooser">
    <ul></ul>
  </div>

  <div id="content">

    <h3 id="percentage-heading"></h3>
    <div class="demo-container">
      <div id="percentage-placeholder" class="demo-placeholder"></div>
    </div>

    <h3 id="absolute-heading"></h3>
    <div class="demo-container">
      <div id="absolute-placeholder" class="demo-placeholder"></div>
    </div>

    <div class="details" id="details">
      <p></p>
    </div>

    

  </div>

  <div id="footer"></div>
</body>
</html>
